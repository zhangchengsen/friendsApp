{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Ymtx/Desktop/friends-app/pages/index/index.vue?8578","webpack:///C:/Users/Ymtx/Desktop/friends-app/pages/index/index.vue?1268","webpack:///C:/Users/Ymtx/Desktop/friends-app/pages/index/index.vue?c50e","webpack:///C:/Users/Ymtx/Desktop/friends-app/pages/index/index.vue?48f1","uni-app:///pages/index/index.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;;;AAGpD;AACyK;AACzK,gBAAgB,kLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAmnB,CAAgB,woBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4BvoB,gD;;AAEA;AACA;AACA,0BADA,EADA;;;AAKA,MALA,kBAKA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA,kBAHA;AAIA,kBAJA;AAKA,mBALA;AAMA,iBANA;;AAQA,GAdA;AAeA,QAfA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA;AAMA,SAPA;AAQA;;AAEA;AACA,kBADA;;AAGA;;AAEA,GA1CA;AA2CA,QA3CA,oBA2CA;;AAEA;AACA;AACA;;AAEA,OAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBANA;;AAQA,KATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA,KARA;AASA;;AAEA,GAzEA;AA0EA,UA1EA;AA2EA;AACA;AACA;AACA,GA9EA;;AAgFA,mCAhFA,+CAgFA;;AAEA;AACA,uCADA;;AAGA,GArFA;AAsFA,0BAtFA,oCAsFA,CAtFA,EAsFA;AACA;;AAEA,GAzFA;;AA2FA;AACA;AACA,mDADA;AAEA,yDAFA,GADA,CA3FA;;;AAiGA;;AAEA,WAFA,qBAEA;AACA,gDADA,SACA,GADA;AAEA;;AAEA;AACA,mBALA,GAKA,EALA;AAMA;AACA;AACA,qBADA,GACA;AACA,sCADA;AAEA,4BAFA;AAGA,2BAHA;AAIA,oCAJA,EADA;;AAOA;AACA;AACA;AACA,iCAjBA;AAkBA,KApBA;AAqBA;AACA,WAtBA,qBAsBA;AACA,qBADA,GACA,kBADA;AAEA,kBAFA,GAEA,wBAFA;AAGA,oBAHA,GAGA,2BAHA;AAIA,yBAJA,GAIA,SAJA;AAKA,wEALA,SAKA,GALA;AAMA,oBANA,GAMA;AACA;AACA,iBAFA,CANA;AASA;AACA,uDADA;AAEA,wFAXA;;AAaA,KAnCA;;AAqCA,aArCA,qBAqCA,KArCA,EAqCA;AACA;AACA;;AAEA;AACA;AACA;AACA,KA5CA;;AA8CA,gBA9CA,wBA8CA,CA9CA,EA8CA;AACA;AACA,KAhDA;;AAkDA;AACA,UAnDA,kBAmDA,CAnDA;AAoDA;AACA,0EADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA;AACA;AACA;;AAEA,KAzEA;AA0EA,UA1EA,kBA0EA,OA1EA,EA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA,OAPA;AAQA;AACA,qBADA;;AAGA,KAtFA;AAuFA,cAvFA,sBAuFA,KAvFA,EAuFA;AACA;AACA;AACA;AACA;AACA;;AAEA,KA9FA,EAjGA,E","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view style=\"margin-bottom: 30rpx;\" class=\"animated fadeIn\">\r\n\t\t\r\n\t\t\t<scroll-view scroll-x class=\"scroll-row\" scroll-with-animation=\"true\" :scroll-into-view=\"scrollInto\" style=\"height: 100rpx;\">\r\n\t\t\t\t<view v-for=\"(item,index) in tabList\" :key = \"index\"  class=\"scroll-row-item px-2 py-2 font-md\" :id = '\"tab\" + index' style=\"line-height: 60rpx;\" @click=\"changeTab(index)\"  :class = \"activeIndex == index ? 'font-weight-bold font-lg active' : '' \" :style =\" activeIndex == index ? 'color:pink;': '' \">\r\n\t\t\t\t\t{{item.classname}}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<swiper :current = \"activeIndex\" @change = \"swiperChange\" :style=\" 'height:' +swiperH +'px'  \">\r\n\t\t\t\t<block v-for = \"(item,index) in newsList\" :key = \"index\">\r\n\t\t\t\t\t<swiper-item>\r\n\t\t\t\t\t\t<template v-if =\"item.list.length > 0\">\r\n\t\t\t\t\t\t\t<scroll-view scroll-y=\"true\"  :style=\" 'height:' + swiperH +'px' \" @scrolltolower=\"toLoadMore(index)\">\r\n\t\t\t\t\t\t\t\t<commonList :userList = \"item.list\" @admire = \"admire\"  @follow =\"follow\"></commonList>\r\n\t\t\t\t\t\t\t\t<loadMore :load = \"item.loadMore\"></loadMore>\r\n\t\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<nothing></nothing>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</block>\r\n\t\t\t</swiper>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {mapState} from 'vuex'\r\n\timport commonList from '../../components/common/common.vue'\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tcommonList\r\n\t\t}\r\n\t\t,\r\n\t\tdata()\t {\r\n\t\t\treturn {\r\n\t\t\t\tscrollInto:\"\",\r\n\t\t\t\tactiveIndex:0,\r\n\t\t\t\tswiperH:600,\r\n\t\t\t\tnewsList:[],\r\n\t\t\t\tcur_swiper:0,\r\n\t\t\t\ttabList:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow()\r\n\t\t{\r\n\t\t\tif(this.change)\r\n\t\t\t{\r\n\t\t\t\tthis.$store.commit('change')\r\n\t\t\t\tthis.getData()\r\n\t\t\t}\r\n\t\t\tlet uid = uni.getStorageSync('uid')\r\n\t\t\tif(uid) \r\n\t\t\t{\r\n\t\t\t\tif(uid == 'pub') this.getData()\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.newsList.forEach(item=>{\r\n\t\t\t\t\t\titem.list.forEach((v)=>{\r\n\t\t\t\t\t\t\tif(v.user_id === user_id)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tv.follow = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.removeStorage({\r\n\t\t\t\t\tkey:'uid'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t\r\n\t\t\tlet res = uni.getSystemInfo({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.swiperH = res.windowHeight - uni.upx2px(100) - res.statusBarHeight \r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 全局监听\r\n\t\t\tuni.$on('changeSupportOrFollow',(e)=>{\r\n\t\t\t\tswitch (e.type) {\r\n\t\t\t\t\tcase 'follow':\r\n\t\t\t\t\t\tthis.follow(e.data.user_id)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'support' :\r\n\t\t\t\t\t\tthis.admire(e.data)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tuni.$on('addRemark',(e)=>{\r\n\t\t\t\tthis.newsList[this.activeIndex].list.forEach(item=>{\r\n\t\t\t\t\tif(item.id == e.id)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.remark_num += 1\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tthis.getData()\r\n\t\t\t\r\n\t\t},\r\n\t\tonUnload()\r\n\t\t{\r\n\t\t\tuni.$off('changeSupportOrFollow',(e)=>{})\r\n\t\t\tuni.$off('addRemark',(e)=>{})\r\n\t\t}\r\n\t\t,\r\n\t\tonNavigationBarSearchInputClicked() {\r\n\t\t\t\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:\"../search/search?type=post\"\r\n\t\t\t})\r\n\t\t},\r\n\t\tonNavigationBarButtonTap(e) {\r\n\t\t\tthis.navigation('public')\r\n\t\t\t\r\n\t\t}\r\n\t\t,\t\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tuser:state=>state.user,\r\n\t\t\t\tchange:state=>state.change\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\tasync getData() {\r\n\t\t\t\tlet res = await this.$http.get('/postclass')\r\n\t\t\t\tthis.tabList = res.list\r\n\t\t\t\t\r\n\t\t\t\t// 获得信息\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tfor (var i = 0 ; i < this.tabList.length ; i ++)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tloadMore:'上拉加载更多',\r\n\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\tfirstLoad:false,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj)\r\n\t\t\t\t}\r\n\t\t\t\tthis.newsList = arr\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\t// 请求文章\r\n\t\t\tasync getList() {\r\n\t\t\t\tlet index = this.activeIndex\r\n\t\t\t\tlet id = this.tabList[index].id\r\n\t\t\t\tlet page = this.newsList[index].page\r\n\t\t\t\tlet isRefresh = page == 1 \r\n\t\t\t\tlet msg = await  this.$http.get('/postclass/'+ id +'/post/'+ page )\r\n\t\t\t\tlet list = msg.list.map(v=>{\r\n\t\t\t\t\treturn this.$U.helper(v)\r\n\t\t\t\t})\r\n\t\t\t\tthis.newsList[index].list = isRefresh? list : [...this.newsList[index].list,...list],\r\n\t\t\t\tthis.newsList[index].firstLoad = true\r\n\t\t\t\tthis.newsList[index].loadMore = list.length < 10 ? '没有更多了' : '上拉加载更多'\r\n\t\t\t\t \r\n\t\t\t}\r\n\t\t\t,\r\n\t\t\tchangeTab(index) {\r\n\t\t\t\tif(index == this.activeIndex) return \r\n\t\t\t\tthis.activeIndex = index\r\n\t\t\t\t\r\n\t\t\t\tthis.scrollInto = \"tab\" + index\r\n\t\t\t\tif(!this.newsList[this.activeIndex].firstLoad)\r\n\t\t\t\tthis.getList()\r\n\t\t\t}\r\n\t\t\t,\r\n\t\t\tswiperChange(e) {\r\n\t\t\t\tthis.changeTab(e.detail.current )\r\n\t\t\t}\r\n\t\t\t,\r\n\t\t\t// 顶\r\n\t\t\tadmire(e)\r\n\t\t\t{\r\n\t\t\t\tlet support = this.newsList[this.activeIndex].list[e.index].support\t\t//指针\r\n\t\t\t\tif(support.type == e.type) return \r\n\t\t\t\telse if(!support.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(e.type == 'support') support.support += 1\r\n\t\t\t\t\telse support.unSupport += 1\r\n\t\t\t\t\tsupport.type = e.type\r\n\t\t\t\t}\r\n\t\t\t\telse if(support.type == \"support\" && e.type == 'unSupport')\r\n\t\t\t\t{\r\n\t\t\t\t\tsupport.support -= 1\r\n\t\t\t\t\tsupport.unSupport += 1\r\n\t\t\t\t\tsupport.type = 'unSupport'\r\n\t\t\t\t}\r\n\t\t\t\telse if(support.type == \"unSupport\" && e.type == \"support\"){\r\n\t\t\t\t\tsupport.support += 1\r\n\t\t\t\t\tsupport.unSupport -= 1\r\n\t\t\t\t\tsupport.type = 'support'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tfollow(user_id) {\r\n\t\t\t\tthis.newsList.forEach(item=>{\r\n\t\t\t\t\titem.list.forEach((v)=>{\r\n\t\t\t\t\t\tif(v.user_id === user_id)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tv.follow = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:\"关注成功\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoLoadMore(index) {\r\n\t\t\t\tlet item = this.newsList[index]\r\n\t\t\t\titem.page++;\r\n\t\t\t\tif(item.loadMore == \"没有更多了\") return\r\n\t\t\t\titem.loadMore = '加载中'\r\n\t\t\t\tthis.getList()\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\t\r\n<style scoped lang=\"less\">\r\n\t\r\n</style>\r\n"],"sourceRoot":""}