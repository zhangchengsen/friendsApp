{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/Ymtx/Desktop/friends-app/pages/zone/zone.vue?d41c","webpack:///C:/Users/Ymtx/Desktop/friends-app/pages/zone/zone.vue?c6b5","webpack:///C:/Users/Ymtx/Desktop/friends-app/pages/zone/zone.vue?bee6","uni-app:///pages/zone/zone.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,0F;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACyK;AACzK,gBAAgB,kLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjDA;AAAA;AAAA;AAAA;AAAknB,CAAgB,uoBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoHtoB;AACA,+F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFA,6B,0XAIA,EACA,IADA,kBACA,CACA,SACA,yDADA,EAEA,cAFA,EAGA,QAHA,EAIA,UAJA,EAKA,YALA,EAMA,SACA,OADA,EAEA,QAFA,EAGA,SAHA,EANA,EAWA,SAXA,GAaA,CAfA,EAgBA,cACA,sBADA,EAhBA,EAoBA,MApBA,kBAoBA,CApBA,EAoBA,kBACA,qBACA,gBACA,mBACA,eACA,+CACA,iBACA,cACA,6BACA,MACA,eACA,qBACA,MANA,CAQA,CATA,EAUA,mCACA,4DACA,qBACA,CACA,qBACA,OACA,CACA,CANA,EAOA,CARA,EASA,CA5CA,EA6CA,MA7CA,oBA6CA,CACA,iDACA,8BACA,CACA,mBACA,oBACA,gBADA,IAGA,CACA,CAtDA,EAwDA,QAxDA,sBAyDA,CACA,mDACA,uCACA,CA5DA,EA8DA,aA9DA,2BA8DA,CACA,iCACA,iDACA,wBACA,kCACA,eACA,CApEA,EAuEA,wBAvEA,sCAuEA,CACA,wBACA,CAzEA,EA0EA,WACA,QADA,sBACA,mBACA,4BACA,aACA,uBADA,EAEA,kCAFA,EAGA,gCAHA,GAKA,iBACA,4DADA,IAGA,CATA,EAUA,CAZA,EAaA;AACA,aAdA,uBAeA,mBACA,kCACA,qCAFA,CAGA;AACA,qDACA,gBACA,oBADA,EAEA,iBAFA,EAGA,gBAHA,EAIA,gCACA,iBACA,CACA,yBACA,kBADA,IAEA,eAFA,EAEA,IAFA,CAEA,gBACA,iBACA,gBACA,aADA,IAGA,mDACA,CARA,EAQA,KARA,CAQA,gBACA,iBACA,CAVA,EAWA,CACA,CAnBA;;AAsBA,KA1CA;;AA4CA;AACA,aA7CA;AA8CA;AACA;AACA,mCADA;;AAGA,KAlDA;;AAoDA,UApDA,kBAoDA,CApDA;AAqDA;AACA;AACA;AACA;AACA;AACA,OAJA;;AAMA;AACA;AACA;AACA;;AAEA,0EAZA,CAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA;AACA;AACA;;AAEA,KArFA;;AAuFA,aAvFA,qBAuFA,KAvFA;AAwFA;AACA;AACA;AACA,KA3FA;AA4FA,WA5FA,qBA4FA;AACA;AACA;AACA;AACA,4BADA;AAEA,kBAFA;AAGA,iBAHA;AAIA,0BAJA;;AAMA;AACA;;;;AAIA,KA1GA;;AA4GA,eA5GA,yBA4GA;AACA;AACA,6BADA;AAEA,qCAFA;AAGA,UAHA,CAGA;AACA;AACA,8BADA;AAEA,gCAFA;AAGA,+BAHA;AAIA,+BAJA;AAKA,uCALA;AAMA,2CANA;AAOA,8FAPA;AAQA,qEARA;AASA,+BATA;AAUA,iCAVA;AAWA,6BAXA;;AAaA,OAjBA,EAiBA,KAjBA,CAiBA;AACA;AACA,OAnBA;AAoBA,KAjIA;AAkIA,UAlIA,kBAkIA,OAlIA,EAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA,OAJA;AAKA;AACA,qBADA;;AAGA;AACA,KA/IA;AAgJA,YAhJA,sBAgJA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,EAKA,KALA,CAKA,0CALA;AAMA,KAvJA;AAwJA,WAxJA,qBAwJA;AACA;AACA;AACA;AACA;AACA,UADA,CACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA,2CADA;AAEA;AACA,OATA,EASA,KATA,CASA,iDATA;;;AAYA,KAxKA;AAyKA,KAzKA;AA0KA;AACA;AACA;;AAEA;AACA,iCADA;AAEA,uBAFA,EAEA,IAFA,CAEA;AACA;AACA,2BADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAbA,EAaA,KAbA,CAaA,iDAbA;;AAeA,OAlBA;;AAoBA;AACA;AACA,iCADA;AAEA,uBAFA,EAEA,IAFA,CAEA;AACA;AACA,yBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAbA,EAaA,KAbA,CAaA,0CAbA;AAcA;AACA;AACA;AACA,KAjNA,EA1EA;;;AA8RA;AACA;AACA,+DADA,GADA;;AAIA,cAJA;AAKA;AACA;AACA,KAPA,GA9RA;;AAuSA;AACA,aADA,qBACA,KADA,EACA;AACA;AACA;AACA,KAJA,EAvSA,E","file":"pages/zone/zone.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/zone/zone.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./zone.vue?vue&type=template&id=60476086&\"\nvar renderjs\nimport script from \"./zone.vue?vue&type=script&lang=js&\"\nexport * from \"./zone.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/zone/zone.vue\"\nexport default component.exports","export * from \"-!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zone.vue?vue&type=template&id=60476086&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"formatNum\")(_vm.count.tiezi)\n\n  var f1 = _vm._f(\"formatNum\")(_vm.count.follow)\n\n  var f2 = _vm._f(\"formatNum\")(_vm.count.fens)\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        f1: f1,\n        f2: f2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\XB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zone.vue?vue&type=script&lang=js&\"","<template>\r\n\t\r\n\t<view class=\"p-3\">\r\n\t\t<view class=\"flex\">\r\n\t\t\t<view class=\"flex align-center justify-center \">\r\n\t\t\t\t<image :src=\"userInfo.userpic ? userInfo.userpic : '/static/images/default.jpg' \" class=\"rounded-circle\" style=\"width: 160rpx;height: 160rpx;\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-1\">\r\n\t\t\t\t<view class=\"flex\">\r\n\t\t\t\t\t<!-- 3个 -->\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column align-center justify-center\">\r\n\t\t\t\t\t\t<view class=\"font-weight-bold font-lg\">\r\n\t\t\t\t\t\t\t{{count.tiezi | formatNum}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>帖子</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column align-center justify-center\">\r\n\t\t\t\t\t\t<view class=\"font-weight-bold font-lg\">\r\n\t\t\t\t\t\t\t{{count.follow | formatNum}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>关注</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column align-center justify-center\">\r\n\t\t\t\t\t\t<view class=\"font-weight-bold font-lg\">\r\n\t\t\t\t\t\t\t{{count.fens | formatNum}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>粉丝</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if = \"user_id != local_user.id\" :style=\"!userInfo.isFollow ? 'background-color: #fd597c;color:#fff;' : 'background-color: #dddddd;color:black;' \" class=\"rounded p-2 text-center mx-auto \" style=\"width: 70%;margin-top: 30rpx;\" @click=\"f\">\r\n\t\t\t\t\t{{!userInfo.isFollow ? '关注' : '取消关注' }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else class=\"\" class=\"rounded p-2 text-center mx-auto \" style=\"width: 70%;margin-top: 30rpx;background-color: #71cfdd;color:black;\" @click=\"navToData\">\r\n\t\t\t\t\t编辑资料\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- tab栏 -->\r\n\t\t<template v-if=\"!userInfo.isblack\">\r\n\t\t<view class=\"flex align-center border-top mt-2\" style=\"justify-content: space-around;height: 100rpx;\" >\r\n\t\t\t\r\n\t\t\t<view v-for=\"(item,index) in tabList\" :key = \"index\"  class=\" scroll-row-item px-2 py-2 \" :id = '\"tab\" + index' style=\"line-height: 60rpx;\" @click=\"changeTab(index)\"  :class = \"activeIndex == index ? 'font-weight-bold font-lg active' : 'font-md' \" :style =\" activeIndex == index ? 'color:pink;': '' \">\r\n\t\t\t\t{{item.name}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\t<template v-if=\"!activeIndex\">\r\n\t\t\t\t<!-- 主页 -->\r\n\t\t\t\t<view class=\"animated fadeIn\">\r\n\t\t\t\t\t<view class=\"border-bottom\">\r\n\t\t\t\t\t\t<view class=\"\" style=\"font-size: 36rpx;\">\r\n\t\t\t\t\t\t\t账号信息\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"mt-2\">\r\n\t\t\t\t\t\t\t账号年龄: {{userInfo.regtime}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"mt-2 mb-2\">\r\n\t\t\t\t\t\t\t账号id: {{user_id}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"border-bottom\">\r\n\t\t\t\t\t\t<view class=\"mt-2\" style=\"font-size: 36rpx;\">\r\n\t\t\t\t\t\t\t个人信息\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"mt-2\">\r\n\t\t\t\t\t\t\t星座: {{userInfo.birthday}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"mt-2\">\r\n\t\t\t\t\t\t\t职业: {{userInfo.job ? userInfo.job : '保密' }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"mt-2\">\r\n\t\t\t\t\t\t\t故乡: {{userInfo.path ? userInfo.path : '保密' }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"mt-2 mb-2\">\r\n\t\t\t\t\t\t\t情感: {{getEmotion}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<template v-else-if=\"activeIndex == 1\">\r\n\t\t\t\t<!--  帖子 -->\r\n\t\t\t\t\t<common-list  :userList=\"user[0].list\" type=\"zone\" @admire = \"admire\"  @follow =\"follow\"  ></common-list>\r\n\t\t\t\t\t<loadMore :load=\"user[0].loadMore\"></loadMore>\r\n\t\t\t</template>\r\n\t\t\t<template v-else>\r\n\t\t\t\t<!-- 动态 -->\r\n\t\t\t\t<common-list  :userList=\"user[1].list\" type=\"zone\" @admire = \"admire\"  @follow =\"follow\"  ></common-list>\r\n\t\t\t\t<loadMore :load= \"user[1].loadMore\"></loadMore>\r\n\t\t\t</template>\r\n\t\t\t\r\n\t</template>\r\n\t<template v-else>\r\n\t\t<view class=\"text-center mt-4\">此用户已被您拉黑</view>\r\n\t</template>\r\n\t<uni-popup ref=\"popup\" type=\"top\">\r\n\t\t<view class=\"flex align-center justify-center bg-white p-2\">\r\n\t\t\t<view class=\"iconfont icon-sousuo mr-2\">\r\n\t\t\t</view>\r\n\t\t\t<view class=\"\" @click=\"blackList\">\r\n\t\t\t\t{{userInfo.isblack ? '取消拉黑' : '加入黑名单' }}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"flex align-center justify-center bg-white p-2\">\r\n\t\t\t<view class=\"iconfont icon-xiaoxi mr-2\">\r\n\t\t\t</view>\r\n\t\t\t<view class=\"\" @click=\"openChat\">\r\n\t\t\t\t聊天\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\t\r\n\t</uni-popup>\r\n\t</view>\n</template>\n\n<script>\r\n\tconst arr = ['保密','已婚','未婚']\r\n\timport {mapState} from 'vuex'\r\n\timport $T from '@/components/common/time.js'\r\n\timport commonList from '../../components/common/common.vue'\r\n\texport default{\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttabList:[{name:'主页'},{name:\"帖子\"},{name:'动态'}],\r\n\t\t\t\tactiveIndex:0,\r\n\t\t\t\tuser:[],\r\n\t\t\t\tuser_id:0,\r\n\t\t\t\tuserInfo:{},\r\n\t\t\t\tcount:{\r\n\t\t\t\t\tfens:0,\r\n\t\t\t\t\ttiezi:0,\r\n\t\t\t\t\tfollow:0\r\n\t\t\t\t},\r\n\t\t\t\tchange:0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tcommonList\r\n\t\t}\r\n\t\t,\r\n\t\tonLoad(e) {\r\n\t\t\tthis.user_id = e.uid\r\n\t\t\tthis.getCount()\r\n\t\t\tthis.getUserInfo()\r\n\t\t\tthis.getData()\r\n\t\t\tuni.$on('changeSupportOrFollow',(e)=>{\r\n\t\t\t\tswitch (e.type) {\r\n\t\t\t\t\tcase 'follow':\r\n\t\t\t\t\t\tthis.follow(e.data.user_id)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'support' :\r\n\t\t\t\t\t\tthis.admire(e.data)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tuni.$on('addRemark',(e)=>{\r\n\t\t\t\tthis.user[this.activeIndex].list.forEach(item=>{\r\n\t\t\t\t\tif(item.id == e.id)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.remark_num += 1\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tlet haveChange = uni.getStorageSync('changeMes')\r\n\t\t\tif(haveChange == 'userInfo')\r\n\t\t\t{\r\n\t\t\t\tthis.getUserInfo()\r\n\t\t\t\tuni.removeStorage({\r\n\t\t\t\t\tkey:'changeMes'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t,\r\n\t\tonUnload()\r\n\t\t{\r\n\t\t\tuni.$off('changeSupportOrFollow',(e)=>{})\r\n\t\t\tuni.$off('addRemark',(e)=>{})\r\n\t\t}\r\n\t\t,\r\n\t\tonReachBottom(){\r\n\t\t\tlet index = this.activeIndex - 1\r\n\t\t\tif(this.user[index].loadMore == '没有更多了') return\r\n\t\t\tthis.user[index].page++\r\n\t\t\tthis.user[index].loadMore = '加载中'\r\n\t\t\tthis.getList()\r\n\t\t}\r\n\t\t\r\n\t\t,\r\n\t\tonNavigationBarButtonTap() {\r\n\t\t\tthis.$refs.popup.open()\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\topenChat() {\r\n\t\t\t\tthis.checkAuth(()=>{\r\n\t\t\t\t\tlet user = {\r\n\t\t\t\t\t\tuser_id:this.user_id,\r\n\t\t\t\t\t\tusername:this.userInfo.username,\r\n\t\t\t\t\t\tuserpic:this.userInfo.userpic\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:'/pages/user-msg/user-msg?user='+JSON.stringify(user)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 黑名单\r\n\t\t\tblackList()\r\n\t\t\t{\r\n\t\t\t\tlet black = this.userInfo.isblack\r\n\t\t\t\tlet msg =  black ? '是否要取消拉黑' : '是否拉黑'\r\n\t\t\t\t//true是拉黑了\r\n\t\t\t\tlet url = black ? '/removeblack' : '/addblack'\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: msg + '该用户',\r\n\t\t\t\t\tconfirmText:'确定',\r\n\t\t\t\t\tcancelText:'取消',\r\n\t\t\t\t\tsuccess: (ret) => {\r\n\t\t\t\t\t\tif(ret.confirm)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.$http.post(url,{\r\n\t\t\t\t\t\t\t\tid:this.user_id\r\n\t\t\t\t\t\t\t},{token:true}).then(res=>{\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle:\"操作成功\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.userInfo.isblack = !this.userInfo.isblack\r\n\t\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t,\r\n\t\t\t// 编辑个人资料\r\n\t\t\tnavToData()\r\n\t\t\t{\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'../userInfo/userInfo'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t,\r\n\t\t\tadmire(e)\r\n\t\t\t{\r\n\t\t\t\tif(this.activeIndex == 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.user[this.activeIndex ].firstLoad = false\r\n\t\t\t\t\tthis.user[this.activeIndex ].page = 1\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tthis.user[this.activeIndex -2 ].firstLoad = false\r\n\t\t\t\t\tthis.user[this.activeIndex -2 ].page = 1\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet support = this.user[this.activeIndex - 1].list[e.index].support\t\t//指针\r\n\t\t\t\tif(support.type == e.type) return \r\n\t\t\t\telse if(!support.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(e.type == 'support') support.support += 1\r\n\t\t\t\t\telse support.unSupport += 1\r\n\t\t\t\t\tsupport.type = e.type\r\n\t\t\t\t}\r\n\t\t\t\telse if(support.type == \"support\" && e.type == 'unSupport')\r\n\t\t\t\t{\r\n\t\t\t\t\tsupport.support -= 1\r\n\t\t\t\t\tsupport.unSupport += 1\r\n\t\t\t\t\tsupport.type = 'unSupport'\r\n\t\t\t\t}\r\n\t\t\t\telse if(support.type == \"unSupport\" && e.type == \"support\"){\r\n\t\t\t\t\tsupport.support += 1\r\n\t\t\t\t\tsupport.unSupport -= 1\r\n\t\t\t\t\tsupport.type = 'support'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchangeTab(index)\r\n\t\t\t{\r\n\t\t\t\tthis.activeIndex = index\r\n\t\t\t\tif(this.activeIndex || [this.activeIndex-1]) this.getList()\r\n\t\t\t},\r\n\t\t\tgetData() {\r\n\t\t\t\t\tfor(var i = 0 ; i < 2 ; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\t\tloadMore:'上拉加载更多',\r\n\t\t\t\t\t\t\tlist:[],\r\n\t\t\t\t\t\t\tpage:1,\r\n\t\t\t\t\t\t\tfirstLoad:false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.user.push(obj)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t,\r\n\t\t\t\tgetUserInfo() {\r\n\t\t\t\t\tthis.$http.post('/getuserinfo',{\r\n\t\t\t\t\t\tuser_id:this.user_id\r\n\t\t\t\t\t},{token:false,notoast:true})\r\n\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\tthis.userInfo = {\r\n\t\t\t\t\t\t\tuserpic:res.userpic,\r\n\t\t\t\t\t\t\tusername:res.username,\r\n\t\t\t\t\t\t\tsex:res.userinfo.sex,\r\n\t\t\t\t\t\t\tage:res.userinfo.age,\r\n\t\t\t\t\t\t\tisFollow:res.fens.length > 0,\r\n\t\t\t\t\t\t\tisblack:res.blacklist.length > 0,\r\n\t\t\t\t\t\t\tregtime:$T.dateFormat(new Date(res.create_time * 1000),'{Y}-{MM}-{DD}'),\r\n\t\t\t\t\t\t\tbirthday:$T.getHoroscope(res.userinfo.birthday),\r\n\t\t\t\t\t\t\tjob:res.userinfo.job,\r\n\t\t\t\t\t\t\tpath:res.userinfo.path,\r\n\t\t\t\t\t\t\tqg:res.userinfo.qg\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\tconsole.log(err.message)\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\tfollow(user_id) {\r\n\t\t\t\t\tuni.setStorageSync('dChange','123')\r\n\t\t\t\t\tuni.setStorageSync('followed','123')\r\n\t\t\t\t\t//出去刷新\r\n\t\t\t\t\tthis.user.forEach((v)=>{\r\n\t\t\t\t\t\tv.list.forEach(item=>{\r\n\t\t\t\t\t\t\titem.follow = true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"关注成功\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.userInfo.isFollow = true\r\n\t\t\t\t},\r\n\t\t\t\tgetCount() {\r\n\t\t\t\t\tthis.$http.get('/user/getcounts/' + this.user_id).then(res=>{\r\n\t\t\t\t\t\tthis.count.tiezi = res.post_count\r\n\t\t\t\t\t\tthis.count.fens = res.withfen_count\r\n\t\t\t\t\t\tthis.count.follow = res.withfollow_count\r\n\t\t\t\t\t\tconsole.log(this.count)\r\n\t\t\t\t\t}).catch(err=>{console.log(err.message)})\r\n\t\t\t\t},\r\n\t\t\t\t getList() {\r\n\t\t\t\t\tlet index = this.activeIndex - 1\r\n\t\t\t\t\tlet page = this.user[index].page\r\n\t\t\t\t\tlet isRefresh = page == 1 \r\n\t\t\t\t\tthis.$http.get('/user/'+ this.user_id +'/post/'+ page )\r\n\t\t\t\t\t.then(msg=>{\r\n\t\t\t\t\t\tlet list = msg.list.map(v=>{\r\n\t\t\t\t\t\t\treturn this.$U.helper(v)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconsole.log(list)\r\n\t\t\t\t\t\tthis.user[index].list = !this.user[index].firstLoad ? list : [...this.user[index].list,...list],\r\n\t\t\t\t\t\tthis.user[index].firstLoad = true\r\n\t\t\t\t\t\tthis.user[index].loadMore = list.length < 10 ? '没有更多了' : '上拉加载更多'\r\n\t\t\t\t\t}).catch(err=>console.log(err.message))\r\n\t\t\t\t\t\r\n\t\t\t\t\t \r\n\t\t\t\t},\r\n\t\t\t\tf()\r\n\t\t\t\t{\r\n\t\t\t\t\tif(this.userInfo.isFollow)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.$http.post('/unfollow',{\r\n\t\t\t\t\t\t\tfollow_id:this.user_id\r\n\t\t\t\t\t\t},{token:true}).then(res=>{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:'取消关注成功'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.user[0].firstLoad = false\r\n\t\t\t\t\t\t\tthis.user[0].page = 1\r\n\t\t\t\t\t\t\tthis.user[1].firstLoad = false\r\n\t\t\t\t\t\t\tthis.user[1].page = 1\r\n\t\t\t\t\t\t\tuni.setStorageSync('uid','pub')\r\n\t\t\t\t\t\t\tconsole.log(uni.getStorageSync('uid'))\r\n\t\t\t\t\t\t\tthis.getList()\r\n\t\t\t\t\t\t}).catch(err=>console.log(err.message))\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.$http.post('/follow',{\r\n\t\t\t\t\t\t\tfollow_id:this.user_id\r\n\t\t\t\t\t\t},{token:true}).then(res=>{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:'关注成功'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.user[0].firstLoad = false\r\n\t\t\t\t\t\t\tthis.user[0].page = 1\r\n\t\t\t\t\t\t\tthis.user[1].firstLoad = false\r\n\t\t\t\t\t\t\tthis.user[1].page = 1\r\n\t\t\t\t\t\t\tuni.setStorageSync('uid','pub')\r\n\t\t\t\t\t\t\tlet uid = uni.getStorageSync('uid')\r\n\t\t\t\t\t\t\tif(this.activeIndex) this.getList()\r\n\t\t\t\t\t\t}).catch(err=>{console.log(err.message)})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.userInfo.isFollow = !this.userInfo.isFollow\r\n\t\t\t\t\tuni.setStorageSync('dChange','123')\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tlocal_user:state=>state.user,\r\n\t\t\t}),\r\n\t\t\tgetEmotion()\r\n\t\t\t{\r\n\t\t\t\treturn arr[this.userInfo.qg]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tformatNum(value){\r\n\t\t\t\tif(value > 99) return '99+'\r\n\t\t\t\telse return value\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}